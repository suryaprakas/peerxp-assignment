var Content=function(options){this.body=options.body;this.data=options.data;this.type=options.type;};Content.prototype={};Object.defineProperties(Content.prototype,{type:{get:function(){if(this._type){return this._type;}else{if(this._data){switch(typeof this._data){case"string":return"text/plain";case"object":return"application/json";}}}
return"text/plain";},set:function(value){this._type=value;return this;},enumerable:true},data:{get:function(){if(this._body){return this.processor.parser(this._body);}else{return this._data;}},set:function(data){if(this._body&&data)Errors.setDataWithBody(this);this._data=data;return this;},enumerable:true},body:{get:function(){if(this._data){return this.processor.stringify(this._data);}else{return this._body.toString();}},set:function(body){if(this._data&&body)Errors.setBodyWithData(this);this._body=body;return this;},enumerable:true},processor:{get:function(){var processor=Content.processors[this.type];if(processor){return processor;}else{var main=this.type.split(";")[0];var parts=main.split(/\+|\//);for(var i=0,l=parts.length;i<l;i++){processor=Content.processors[parts[i]]}
return processor||{parser:identity,stringify:toString};}},enumerable:true},length:{get:function(){if(typeof Buffer!=='undefined'){return Buffer.byteLength(this.body);}
return this.body.length;}}});Content.processors={};Content.registerProcessor=function(types,processor){if(types.forEach){types.forEach(function(type){Content.processors[type]=processor;});}else{Content.processors[types]=processor;}};var identity=function(x){return x;},toString=function(x){return x.toString();}
Content.registerProcessor(["text/html","text/plain","text"],{parser:identity,stringify:toString});Content.registerProcessor(["application/json; charset=utf-8","application/json","json"],{parser:function(string){return JSON.parse(string);},stringify:function(data){return JSON.stringify(data);}});var qs=require('querystring');Content.registerProcessor(["application/x-www-form-urlencoded"],{parser:qs.parse,stringify:qs.stringify});var Errors={setDataWithBody:function(object){throw new Error("Attempt to set data attribute of a content object "+"when the body attributes was already set.");},setBodyWithData:function(object){throw new Error("Attempt to set body attribute of a content object "+"when the data attributes was already set.");}}
module.exports=Content;